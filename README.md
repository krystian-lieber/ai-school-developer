# AI For Developer Productivity: Coder Agent - CloudFix recommendation report writer

## Background

This is a project for the BloomTech AI School Developer Course. It is a simple agent that uses the Langchain library to write code and execute terminal commands on your behalf.

I have created a custom tool that aims to implement the CloudFix recommendation reports functionality for more finders. CloudFix is a tool that helps you to optimize your AWS cloud environment and reduce cost. The addition of recommendation reports is a feature that is currently in development for the CloudFix team to give more information to the customers.

## Agent

The agent is a simple agent that uses the Langchain library to write code and execute terminal commands on your behalf.
The tools can be grouped into 3 categories:

1. File Management
2. Code checks
3. Version Control

In the first category, the agent is given the option to create new files and edit existing ones by appending, editing lines or replacing the whole file.
In the second category, the agent is given the option to check the code for potential issues by running Typescript compilation and linting, the information about the errors is fedback to the LLM.
In the third category, the agent is given the option to create a new branch, stage, commit and push the changes to the repository.

## Results

Here is a sample code generated by the agent:

```ts
export const ReportTemplate = `# EMR Task Instance Retype
Cloudfix identified an opportunity to retype your EMR task instance {InstanceId} in cluster {emrClusterId} to a more cost-effective instance type. This could result in significant cost savings while maintaining performance.
## Instance Details
* **Instance ID:** {InstanceId}
* **Cluster ID:** {emrClusterId}
* **Current Instance Type:** {CurrentInstanceType}
* **Proposed Instance Type:** {ProposedInstanceType}
* **Annual Cost Savings:** {formatMoney AnnualSavings}
## Recommendation
We recommend retyping the EMR task instance to the proposed instance type to realize these savings.
For more details on EMR task instance retyping, please visit our [support article](https://support.cloudfix.com/hc/en-us/articles/EMR-Task-Instance-Retyping)`;
```

```ts
  private populateFinderReportData() {
    return (item: EmrRetypeTasksValidation) => {
      item.finderReportData = {
        InstanceId: item.resource.resourceId,
        emrClusterId: item.resource.emrClusterId,
        CurrentInstanceType: item.resource.currentInstanceType,
        ProposedInstanceType: item.resource.proposedInstanceType,
        AnnualSavings: item.annualSavings,
      };
    };
  }
```

The generated code is not only correct but also passed all the PR checks in the CI/CD pipeline.

On the other hand, there are situations in which the agent generated the code, but had added it in completely wrong places, for example in the middle of an existing array.

## Conclusion

This project was a success and I learned a lot about the Langchain library and how to use it to write code and execute terminal commands on your behalf.
It also showed that although agents are a powerful tool, there is a need to finalize and check the changes by hand.

If I were to start that project again, I would create more focused tools. If we consider that the most advanced code editing agents like SWE-Agents, resolve about 12.47% of the issues in their benchmark, it is hard to expect that our agent would be able to resolve 80% of the issues. Therefore preparing a task that would generate the "Report template" could help. Then the agent would only be tasked with updating the code and making it compile and would not be bothered with the contents.
